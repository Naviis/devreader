var FeedsViewModel=function(){return this.feedsPanelOpened=ko.observable(!0),this.addPanelOpened=ko.observable(!1),this.feedsList=ko.observableArray([]),this.defaultAddInputValue="http://",this.gFeed=new GoogleFeed,this};FeedsViewModel.prototype={addFeed:function(e,d){if(13==d.keyCode){var t=this,n=d.target,a=n.value,s=this.getDomainName(a);this.gFeed.processFeed(a,function(e){e.error?alert("error GFeed"):t.feedsList.push({id:"feed_"+t.feedsList().length,url:a,name:s,checked:ko.observable(!0),entries:e.feed.entries}),n.value=t.defaultAddInputValue,t.toggleAddPanel()})}return!0},getDomainName:function(e){var d=document.createElement("a");d.href=e;var t=(d.host.match(/([^.]+)\.\w{2,3}(?:\.\w{2})?$/)||[])[1];return t},toggleFeedsPanel:function(){this.feedsPanelOpened(this.feedsPanelOpened()?!1:!0)},toggleAddPanel:function(){this.addPanelOpened(this.addPanelOpened()?!1:!0)}},ko.applyBindings(new FeedsViewModel);